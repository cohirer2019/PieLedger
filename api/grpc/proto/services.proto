syntax = "proto3";

import "ledger.proto";

package pieledger;

message AccountBalanceRequest {
  Account account = 1;
  bool force = 2;
}

message TransactionQueryRequest {
  repeated string guids = 1;
  Account account = 2;
  int32 page_number = 3;
  int32 result_per_page = 4;
}

service PieLedger {
  rpc FindOrCreateAccount(Account) returns (Account);
  rpc AlterAccount(Account) returns (Account);
  rpc UpdateBalance(AccountBalanceRequest) returns (Account);

  rpc CreateTransaction(Transaction) returns (Transaction);
  rpc FindTransactions(TransactionQueryRequest) returns (stream Transaction);
  rpc AlterTransaction(Transaction) returns (Transaction);
}
