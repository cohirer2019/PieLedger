syntax = "proto3";

import "ledger.proto";

package pieledger;

message TransactionQueryRequest {
  int32 page_number = 1;
  int32 result_per_page = 2;
  repeated string guids = 3;
  Account account = 4;
}

message SplitQueryRequest {
  int32 page_number = 1;
  int32 result_per_page = 2;
  Account account = 3;
  SplitAction action = 4;
}

service PieLedger {
  rpc FindOrCreateAccount(Account) returns (Account);
  rpc AlterAccount(Account) returns (Account);

  rpc CreateTransaction(Transaction) returns (Transaction);
  rpc FindTransactions(TransactionQueryRequest) returns (stream Transaction);
  rpc AlterTransaction(Transaction) returns (Transaction);
}
